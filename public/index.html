<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>AMIV</title>

    <link href="bs/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <script src="bs/js/bootstrap.min.js"></script>
    <script src="https://npmcdn.com/masonry-layout@4.0/dist/masonry.pkgd.min.js"></script>

    <link href="css/logo-nav.css" rel="stylesheet">
    <link href="css/cards.css" rel="stylesheet">
    <link href="css/dynamic.css" rel="stylesheet">
    <style>
        .grid-item-content {
            height: 100px;
            background: #D26;
            border: 2px solid hsla(0, 0%, 0%, 0.5);
            border-radius: 5px;
        }

        .grid-item-content--height2 {
            height: 200px;
        }
    </style>
</head>


<body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">
                    <img src="res/AMIV_Logo_150_50.svg" alt="AMIV" height="80%">
                </a>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    <li>
                        <a href="#">Home</a>
                    </li>
                    <li>
                        <a href="#">Der AMIV</a>
                    </li>
                    <li>
                        <a href="#">Studium</a>
                    </li>
                    <li>
                        <a href="#">Jobb√∂rse</a>
                    </li>
                    <form class="navbar-form navbar-left" role="search">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search">
                        </div>
                        <button type="submit" class="btn btn-default">Search</button>
                    </form>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <div class="container-fluid">
        <div class="grid">
            <div class="grid-sizer"></div>
        </div>
    </div>

    <script>
        function getEvents(callback) {
            callback = callback || function(ret) {
                console.log(ret);
            }
            $.getJSON('https://amiv-apidev.vsos.ethz.ch/events/', callback);
        }

        function addElement(item) {
            $('.grid')
                .append('<div class="grid-item col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2">' + item + '</div>')
                .masonry('reloadItems').masonry();
        }
        
        $(document).ready(function() {
            $('.grid-item, .grid-sizer').addClass('col-xs-12 col-sm-6 col-md-4 col-lg-3 col-xl-2');
            $('.grid').masonry({
                itemSelector: '.grid-item',
                columnWidth: '.grid-sizer',
                percentPosition: true
            });
            getEvents(function(ret) {
                ret['_items'].forEach(function(item) {
                    console.log(item.title_de);
                    if ( item.img_banner == null){
						item.img_banner = item.img_infoscreen;
                    }
					var datenum = new Date(item.time_start);
					
                    addElement('<div class="card"><div class="card-image"><img class="img-responsive" src="'+item.img_banner+'"><date><div class="month">'+datenum.getMonth()+'</div><div class="day">'+datenum.getDate()+'</div><div class="starttime">'+datenum.getHours()+':'+datenum.getMinutes()+'</div><date-overlay></date-overlay></date><span class="card-title">'+item.title_de+' @ '+item.location+'</span></div><div class="card-content">'+item.description_de+'</div><div class="card-action"><a href="#" target="new_blank">Zum Event</a><a href="#" target="new_blank">Anmeldung</a><a href="#" target="new_blank">Im Kalender speichern</a></div></div>');
                });
            });
        });
    </script>
    
    <script>
	    $(function() {
			var container = document.createElement('div');
			container.id = "card";

			$('grid').append(container);
			
			/*Date*/
			$(".month").append("October");
			$(".day").append("42");
			$(".starttime").append("18:00 - 20:00");
			
			/*Visible Content*/
			$(".card-title").html("Jarcakebakery @ FoodLab"); //Title and Location
			$(".card-content").append("<p>This is the best event like ever! You can bake some jarcakes and eat the afterwards all by yourself.</p>"); //content
			$(".card-action").append(); //Links
			$(".img-responsive").attr("src", "http://cdn0.wideopencountry.com/wp-content/uploads/2015/07/JamCheesecakesInAJarTall-793x526.png"); //image
			
			$('#card').append(html);
		});
	</script>
    
    <div class="col-xs-12 col-md-4 col-lg-3">
		<div class="card card-1">
			<div class="card-image">
				<img class="img-responsive">
				<date>
				 	<div class="month"></div>
				 	<div class="day"></div>
				 	<div class="starttime"></div>
				 	<date-overlay></date-overlay>
				</date>
				<span class="card-title"></span>
			</div>
            
			<div class="card-content"></div>
                
			<div class="card-action">
				<a href="#" target="new_blank">Zum Event</a>
		 		<a href="#" target="new_blank">Anmeldung</a>
				<a href="#" target="new_blank">Im Kalender speichern</a>
            </div>
        </div>
    </div>
</body>

</html>
